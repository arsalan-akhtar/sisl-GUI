(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{210:function(e,t,n){e.exports=n(532)},215:function(e,t,n){},216:function(e,t,n){},532:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(16),o=n.n(s),i=(n(215),n(216),n(8)),l=n(9),c=n(12),u=n(13),p=n(14),d=n(5),f=n(24),g=function(e){return{type:"SET_SESSION",session:e}},m=function(e,t){return{type:"ADD_PLOTS",newPlots:e,tabsIDs:t}},b=function(e){return{type:"SET_STRUCTURES",newStructures:e}},h=function(e){return{type:"SET_SESSION_TABS",tabs:e}},v=function(e){return{type:"SET_ACTIVE_PLOT",activePlot:e}},y=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return a.a.createElement(d.Navbar,{brand:a.a.createElement("a",null),alignLinks:"right",className:"transparent z-depth-0"},a.a.createElement(d.NavItem,{className:"blackText",href:"/plots"},"Plots"),a.a.createElement(d.NavItem,{href:"/settings"},a.a.createElement(d.Icon,null,"settings")),a.a.createElement(d.NavItem,{href:"/settings"},a.a.createElement(d.Icon,null,"help")))}}]),t}(r.Component),O=Object(f.b)(null,(function(e){return{clearSession:function(){return e({type:"CLEAR_SESSION"})}}}))(y),E=n(533),S=n(42),j=Object(S.a)(),P=n(31);function w(e){var t=e.component,n=e.isPrivate,r=Object(P.a)(e,["component","isPrivate"]);return n?a.a.createElement(E.a,{to:"/"}):a.a.createElement(E.b,Object.assign({},r,{component:t}))}w.defaultProps={isPrivate:!1};var T=n(36),C=n(3),k=n(18),I=n.n(k),A=n(45),N=n.n(A),D=n(58),_=n(67),x=n(201),R=n.n(x),B=n(202),L=n(203);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=new(function(){function e(){var t=this;Object(i.a)(this,e),this.tabAdress=function(e){return t.tabsAdress+"/"+e},this.plotAdress=function(e){return t.plotsAdress+"/"+e},this._requestToApi=function(e,n,r){fetch(t.apiAdress+e,G({headers:{Accept:"application/json","Content-Type":"application/json"}},n)).then((function(e){return e.json()})).then((function(e){e.statusCode>=400?alert(e.error):(e.plot&&(e=G({},e,{plot:G({},e.plot,{figure:JSON.parse(e.plot.figure)})})),r(e))})).catch((function(e){console.log(e)}))},this._get=function(e,n){var r=n.request,a=n.responseHandler;t._requestToApi(e,G({},r,{method:"GET"}),a)},this._post=function(e,n){var r=n.request,a=n.responseHandler;t._requestToApi(e,G({},r,{method:"POST"}),a)},this._put=function(e,n){var r=n.request,a=n.responseHandler;t._requestToApi(e,G({},r,{method:"PUT"}),a)},this._delete=function(e,n){var r=n.request,a=n.responseHandler;t._requestToApi(e,G({},r,{method:"DELETE"}),a)},this._updateSettings=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify({settings:n,action:"updateSettings"})},responseHandler:r})},this._undoSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._post(e,{request:{body:JSON.stringify({action:"undoSettings"})},responseHandler:n})},this._save=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify(G({action:"save"},n))},responseHandler:r})},this._load=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify(G({action:"load"},n))},responseHandler:r})},this.getSessionSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.sessionAdress,{responseHandler:function(t){return e(t.session)}})},this.updateSessionSettings=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._updateSettings(t.sessionAdress,n,(function(e){return r(e.session)}))},this.undoSessionSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._undoSettings(t.sessionAdress,(function(e){return n(e.session)}))},this.saveSession=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._save(t.sessionAdress,e,(function(t){return n(t.session,e)}))},this.loadSession=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._load(t.sessionAdress,e,(function(t){return n(t.session,e)}))},this.getAvailableStructs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.structsAdress,{responseHandler:function(t){return e(t.structures)}})},this.getSessionTabs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.tabsAdress,{responseHandler:function(t){return e(t.tabs)}})},this.addNewTab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.newtabAdress,{responseHandler:function(t){return e(t.tabs)}})},this.removeTab=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._delete(t.tabAdress(e),{responseHandler:function(e){return n(e.tabs)}})},this.updateTabParams=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._put(t.tabAdress(e),{request:{body:JSON.stringify(n)},responseHandler:function(e){return r(e.tabs)}})},this.getPlotOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.plotTypesAdress,{responseHandler:function(t){return e(t.plotOptions)}})},this.getPlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._get(t.plotAdress(e),{responseHandler:function(e){return n(e.plot)}})},this.getNewPlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._post(t.plotsAdress,{request:{body:JSON.stringify(e)},responseHandler:function(t){return n(t.plot,e)}})},this.updatePlotSettings=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._updateSettings(t.plotAdress(e),n,(function(e){return r(e.plot)}))},this.undoPlotSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._undoSettings(t.plotAdress(e),(function(e){return n(e.plot)}))},this.removePlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._delete(t.plotAdress(e.plotID),{responseHandler:function(t){return n(t.session,e)}})},this.apiAdress="http://localhost:4000"}return Object(l.a)(e,[{key:"sessionAdress",get:function(){return"/sislGUI/session"}},{key:"tabsAdress",get:function(){return"/sislGUI/tab"}},{key:"newtabAdress",get:function(){return this.tabsAdress+"/new"}},{key:"plotsAdress",get:function(){return"/sislGUI/plot"}},{key:"plotTypesAdress",get:function(){return"/sislGUI/plotTypes"}},{key:"structsAdress",get:function(){return"/sislGUI/structs"}}]),e}());function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).removePlot=function(){V.removePlot({plotID:n.props.plot.id,tabID:n.props.active.tab},(function(e,t){n.props.setSessionTabs(e.tabs),n.props.removePlot(t.plotID)}))},n.setPlotAsActive=function(){n.props.setActivePlot(n.props.plot)},n.state={isLoading:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(this.state.isLoading||!this.props.plot)return a.a.createElement(d.Card,{className:"plotcard",style:{borderRadius:15}},a.a.createElement(d.Row,{style:{textAlign:"center"}},a.a.createElement(B.CircleLoader,{color:"#36D7B7"})),a.a.createElement("div",null,"We are working hard to load your plot."));var t=this.props.plot.figure.layout,n=this.props.plot.settings.paper_bgcolor||"white";if(this.props.active.plot&&this.props.active.plot.id==this.props.plot.id){n=this.props.active.plot.settings.paper_bgcolor||"white";var r=I.a.groupBy(this.props.active.plot.params,"group").layout.reduce((function(t,n){return t[n.key]=e.props.active.plot.settings[n.key],t}),{}),s=Object(L.unflatten)(r,{delimiter:"_"});t=q({},t,{},r,{xaxis:q({},t.xaxis,{},s.xaxis),yaxis:q({},t.yaxis,{},s.yaxis)})}var o=Object(_.d)((function(){return a.a.createElement("div",{style:{cursor:"pointer"}},a.a.createElement(d.Icon,{className:"small grey-text"},"drag_handle"))})),i=this.props.sortable?a.a.createElement("div",{"data-tip":"Drag the plot to change its position",style:{justifyContent:"center",alignItems:"center",textAlign:"center",paddingTop:"20px",background:n}},a.a.createElement(o,null)):null;return a.a.createElement(d.Card,{className:"plotcard",style:{borderRadius:15,overflow:"hidden"}},a.a.createElement("div",{style:q({display:"flex",flexDirection:"column"},this.props.style)},i,a.a.createElement("div",{style:{flex:1,padding:"10px 10px 0 10px",background:n}},a.a.createElement(R.a,{useResizeHandler:!0,style:q({width:"auto",height:"100%"},this.props.plotStyle),data:this.props.plot.figure.data,layout:t,frames:this.props.plot.figure.frames,onClick:function(e){return console.log(e)}})),a.a.createElement("div",{style:{display:"flex"},className:"card-action"},a.a.createElement("div",{style:{flex:1,textAlign:"left"}},a.a.createElement("a",{"data-tip":"Full screen",href:"#",onClick:function(){return alert("Still not implemented, sorry :(")}},a.a.createElement(d.Icon,null,"fullscreen"))),a.a.createElement("div",null,a.a.createElement("a",{"data-tip":"Edit",href:"/plotTweaking",onClick:this.setPlotAsActive},a.a.createElement(d.Icon,null,"edit")),a.a.createElement("a",{"data-tip":"Export data",href:"#"},a.a.createElement(d.Icon,null,"file_download")),a.a.createElement("a",{"data-tip":"Remove",href:"#",className:"red-text",onClick:this.removePlot},a.a.createElement(d.Icon,{className:"removePlot"},"delete"))))),a.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(r.Component),F=Object(f.b)((function(e){return{active:e.active,session:e.session}}),(function(e){return{setSessionTabs:function(t){return e(h(t))},setActivePlot:function(t){return e(v(t))},removePlot:function(t,n){return e(function(e,t){return{type:"REMOVE_PLOT",plotID:e,tabID:t}}(t,n))}}}))(U),W=Object(_.b)((function(e){var t=e.plot;return a.a.createElement(d.Col,{s:12,m:6,l:4},a.a.createElement(F,{plot:t,sortable:!0,plotStyle:{height:"65vh"}}))})),J=Object(_.a)((function(e){var t=e.plots;return a.a.createElement(d.Row,null,t.map((function(e,t){return a.a.createElement(W,{key:t,index:t,plot:e})})))})),X=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onSortEnd=function(e){var t=e.oldIndex,r=e.newIndex;n.props.setTabPlots(n.props.active.tab,Object(_.c)(I.a.find(n.props.tabs,["id",n.props.active.tab]).plots,t,r))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.active.tab)return null;var t=I.a.find(this.props.tabs,["id",this.props.active.tab]);if(!t)return null;var n=t.plots.map((function(t){return e.props.plots[t]}));return a.a.createElement("div",null,a.a.createElement(J,{axis:"xy",useDragHandle:!0,transitionDuration:0,plots:n,onSortEnd:this.onSortEnd}))}}]),t}(r.Component),M=Object(f.b)((function(e){return{plots:e.plots,structures:e.structures,tabs:e.tabs,active:e.active}}),(function(e){return{setTabPlots:function(t,n){return e(function(e,t){return{type:"SET_TAB_PLOTS",tabID:e,plots:t}}(t,n))}}}))(X);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).syncWithSession=function(e){n.updateTabs(),V.getPlotOptions((function(e){return n.setState({plotOptions:e})})),V.getAvailableStructs((function(e){return n.props.setNewStructures(e)})),e?n.props.setCurrentSession(e):V.getSessionSettings((function(e){return n.props.setCurrentSession(e)}))},n.updateTabs=function(e){e?n.props.setSessionTabs(e):V.getSessionTabs((function(e){n.props.setSessionTabs(e),I.a.find(e,["id",n.props.active.tab])||n.props.setActiveTab(e.length>0?e[0].id:void 0)}))},n.newTab=function(){V.addNewTab((function(e){n.updateTabs(e),n.props.setActiveTab(I.a.last(e).id)}))},n.removeTab=function(e){var t=I.a.findIndex(n.props.tabs,["id",e]);V.removeTab(e,(function(e){n.props.setActiveTab(e.length>0?e[Math.min(e.length-1,t)].id:void 0),n.updateTabs(e)}))},n.updateTabParams=function(e,t){V.updateTabParams(e,t,(function(e){n.updateTabs(e)}))},n.updateTabName=function(e){e.target.blur(),n.updateTabParams(e.target.id,{name:e.target.textContent})},n.getNewPlot=function(){n.setState({isLoading:!0}),V.getNewPlot(K({tabID:n.props.active.tab},n.state.plotToInitialize),(function(e,t){n.updateTabs(),n.props.addPlots(Object(C.a)({},e.id,e)),n.togglePlotInitializer(),n.props.setActiveTab(t.tabID),n.setState({isLoading:!1})}))},n.saveCurrentSession=function(){var e=prompt("Please provide the path to save the session.\n\nRoot directory:\n"+n.props.session.settings.rootDir);e&&(V.saveSession({path:e}),alert("Session saved"))},n.loadSession=function(){var e=prompt("Please provide the path of the saved session.\n\nRoot directory:\n"+n.props.session.settings.rootDir);e&&V.loadSession({path:e},(function(e){console.log("Session loaded",e),n.syncWithSession(e)}))},n.togglePlotInitializer=function(){n.state.displayPlotInitializer||window.scrollTo({top:0,behavior:"smooth"}),n.setState({displayPlotInitializer:!n.state.displayPlotInitializer})},n.updateInitializingOptions=function(e,t){n.setState({plotToInitialize:K({},n.state.plotToInitialize,Object(C.a)({},e,t))})},n.renderPlotInitializer=function(){if(0==n.props.tabs.length)return null;var e=n.state.isLoading?a.a.createElement(d.Row,null,"We are getting your shiny new plot... wait a moment please :)"):null;return a.a.createElement(d.Card,{style:{marginLeft:20,marginRight:20,background:"#5588ff"},actions:a.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},a.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:n.togglePlotInitializer},"Dismiss",a.a.createElement(d.Icon,{right:!0},"close")),a.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:n.getNewPlot},"Initialize plot",a.a.createElement(d.Icon,{right:!0},"done")),a.a.createElement("a",{className:"btn-flat black-text initPlotBtn"},a.a.createElement(d.Icon,null,"refresh")))},a.a.createElement(d.Row,null,a.a.createElement(d.Col,{s:12,m:12,l:6},a.a.createElement(d.Row,null,"Structures"),a.a.createElement(d.Row,null,Object.keys(n.props.structures).map((function(e){var t=n.state.plotToInitialize.struct==e?"selected":null;return a.a.createElement(d.Col,{s:12,m:6,l:4},a.a.createElement("div",{className:"structureCell "+t,onClick:function(){return n.updateInitializingOptions("struct",e)}},n.props.structures[e].name))})))),a.a.createElement(d.Col,{s:12,m:6,l:4},a.a.createElement(d.Row,null,"Plot type"),a.a.createElement(D.a,{options:n.state.plotOptions,placeholder:"Choose the plot type...",isClearable:!0,isSearchable:!0,onChange:function(e){return n.updateInitializingOptions("plotClass",e?e.value:void 0)}})),a.a.createElement(d.Col,{s:12,m:6,l:2},a.a.createElement(d.Row,null,"Tab"),a.a.createElement(D.a,{placeholder:"Choose a tab...",options:n.props.tabs.map((function(e){return{label:e.name,value:e.id}})),defaultValue:n.props.active.tab&&I.a.find(n.props.tabs,["id",n.props.active.tab])?{label:I.a.find(n.props.tabs,["id",n.props.active.tab]).name,value:n.props.active.tab}:null,isClearable:!0,isSearchable:!0,onChange:function(e){return n.updateInitializingOptions("tabID",e?e.value:void 0)}}))),e)},n.renderNewPlotButton=function(e){var t=e?null:a.a.createElement(d.Button,{"data-tip":"New plot",floating:!0,onClick:n.togglePlotInitializer,icon:a.a.createElement(d.Icon,null,"add"),className:"green"});return a.a.createElement(d.Button,{floating:!0,icon:a.a.createElement(d.Icon,null,"menu"),fab:{direction:"left",hoverEnabled:!1},className:0!=Object.keys(n.props.plots).length||n.state.displayPlotInitializer?"red":"red pulse",large:!0},a.a.createElement(N.a,{multiline:!0,disable:!!n.props.session.settings&&!n.props.session.settings.showTooltips}),t,a.a.createElement(d.Button,{"data-tip":"Save session",floating:!0,icon:a.a.createElement(d.Icon,null,"save"),onClick:n.saveCurrentSession,className:"yellow darken-1"}),a.a.createElement(d.Button,{"data-tip":"Load session",floating:!0,icon:a.a.createElement(d.Icon,null,"open_in_new"),onClick:n.loadSession,className:"green"}),a.a.createElement(d.Button,{floating:!0,icon:a.a.createElement(d.Icon,null),className:"blue"}))},n.state={displayPlotInitializer:!1,plotToInitialize:{struct:!1},loadingPlots:[],plotOptions:[]},n.syncWithSession(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setActivePlot(void 0)}},{key:"componentDidUpdate",value:function(){var e=this,t=I.a.find(this.props.tabs,["id",this.props.active.tab]);t&&t.plots.forEach((function(t){e.props.plots[t]||-1!=e.state.loadingPlots.indexOf(t)||(e.setState({loadingPlots:[].concat(Object(T.a)(e.state.loadingPlots),[t])}),V.getPlot(t,(function(n){e.props.addPlots(Object(C.a)({},n.id,n)),e.setState({loadingPlots:e.state.loadingPlots.filter((function(e){return e!=t}))})})))}))}},{key:"render",value:function(){var e=this,t=this.props.tabs.map((function(t){var n=t.id,r=t.name,s=n==e.props.active.tab;return a.a.createElement("div",{key:n,className:s?"active plotTab":"plotTab",onClick:s?null:function(){return e.props.setActiveTab(n)}},a.a.createElement("div",{id:n,contentEditable:s,onBlur:e.updateTabName,onKeyUp:function(t){13===t.keyCode&&e.updateTabName(t)}},r),s?a.a.createElement("div",{className:"removeTabBut",onClick:function(){return e.removeTab(n)}},a.a.createElement(d.Icon,null,"remove_circle")):null)}));return a.a.createElement("div",null,a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:"0px 20px",paddingLeft:80,alignItems:"center"}},a.a.createElement("div",{onClick:this.newTab,"data-tip":"New tab"},a.a.createElement(d.Icon,{className:"newTabIcon small blue-text text-darken-3",style:{paddingRight:0}},"create_new_folder")),t),a.a.createElement(d.Row,{className:"plotInitializer"+(this.state.displayPlotInitializer?"":" hidden")},a.a.createElement(d.Col,{s:12},this.renderPlotInitializer())),a.a.createElement(d.Row,null,this.renderNewPlotButton(this.state.displayPlotInitializer)),a.a.createElement(M,null),a.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(r.Component),$=Object(f.b)((function(e){return{plots:e.plots,structures:e.structures,tabs:e.tabs,active:e.active,session:e.session}}),(function(e){return{setCurrentSession:function(t){return e(g(t))},setActiveTab:function(t){return e({type:"SET_ACTIVE_TAB",activeTab:t})},setSessionTabs:function(t){return e(h(t))},setActivePlot:function(t){return e(v(t))},addPlots:function(t,n){return e(m(t,n))},addTabs:function(t){return e(function(e){return{type:"ADD_TABS",newTabs:e}}(t))},setNewStructures:function(t){return e(b(t))}}}))(Y),Z=n(98),ee=n(100);n(196);function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).addQuery=function(){var e=n.props.setting.inputField.queryForm.reduce((function(e,t){return e[t.key]=t.default||null,e}),{});e.active=!0,n.props.changeSettingValue([].concat(Object(T.a)(n.props.value),[e]))},n.changeSettingValue=function(e,t,r){var a=I.a.cloneDeep(n.props.value);a[e]=ne({},a[e],Object(C.a)({},t,r)),n.props.changeSettingValue(a)},n.renderInputField=function(e,t,r){var s,o=e.inputField;if(!o)return null;if("textinput"==o.type)s=a.a.createElement(d.TextInput,Object.assign({noLayout:!0,value:t,onChange:function(t){return n.changeSettingValue(r,e.key,t.target.value)},label:e.name},o.params));else if("switch"==o.type)s=a.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingBottom:10}},e.name),a.a.createElement(d.Switch,Object.assign({id:r+e.key,checked:t,onChange:function(t){return n.changeSettingValue(r,e.key,t.target.checked)}},o.params)));else if("dropdown"==o.type)s=a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingRight:20}},e.name+":"),a.a.createElement(D.a,Object.assign({className:"querySelect",value:Array.isArray(t)?t.map((function(e){return I.a.find(o.params.options,{value:e})})):I.a.find(o.params.options,{value:t}),onChange:function(t){return n.changeSettingValue(r,e.key,Array.isArray(t)?t.map((function(e){return e.value})):t?t.value:null)}},o.params)));else if("color"==o.type){var i=n.state.displayColorPicker?a.a.createElement("div",{style:{position:"absolute",bottom:60}},a.a.createElement(Z.ChromePicker,Object.assign({color:t,onChangeComplete:function(t){return n.changeSettingValue(r,e.key,t.hex)}},o.params))):null;s=a.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingBottom:10}},e.name),a.a.createElement("div",{className:"z-depth-2",onClick:n.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:t}}),i)}else"rangeslider"==o.type?s=a.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},a.a.createElement("div",{style:{paddingBottom:10}},e.name),a.a.createElement(ee.a,Object.assign({value:t,onChange:function(t){return n.changeSettingValue(r,e.key,t)}},o.params))):"number"==o.type&&(s=a.a.createElement("div",null,a.a.createElement("div",{style:{paddingBottom:10}},e.name),a.a.createElement("input",Object.assign({type:"number",value:t,onChange:function(t){return n.changeSettingValue(r,e.key,Number(t.target.value))}},o.params))));return a.a.createElement("div",{style:ne({marginBottom:5,marginTop:5,paddingLeft:10,paddingRight:10,width:n.props.w(o.width)},o.style)},s)},n.renderQuery=function(e,t){return a.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement(d.Switch,{id:t+"active",checked:e.active,onChange:function(e){return n.changeSettingValue(t,"active",e.target.checked)}}),a.a.createElement(d.Card,{className:"queryCard",style:{flex:1,background:e.active?"#CBFFC0":"#ffc3cd",borderRadius:10}},a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},n.props.setting.inputField.queryForm.map((function(r){return n.renderInputField(r,e[r.key],t)})))))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,this.props.value.map((function(t,n){return e.renderQuery(t,n)})),a.a.createElement(d.Button,{"data-tip":"Add a new query",onClick:this.addQuery},"Add Query"))}}]),t}(r.Component);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).w=function(e){if(e)for(var t=["s","m","l"].map((function(t){return e.indexOf(t)>=0})),r=["small","medium","infinity"].indexOf(n.props.browser.mediaType);r>-1;r--){if(t[r])return I.a.find(e.split(" "),(function(e){return e.indexOf(["s","m","l"][r])>=0})).substr(1)}},n.changeSettingValue=function(e){n.props.changeSettings(n.props.onSettingChangeType,n.props.setting.key,e)},n.toggleColorPicker=function(){n.setState({displayColorPicker:!n.state.displayColorPicker})},n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.setting.inputField;if("textinput"==n.type)e=a.a.createElement(d.TextInput,Object.assign({noLayout:!0,value:this.props.value,onChange:function(e){return t.changeSettingValue(e.target.value)},label:this.props.setting.name},n.params));else if("switch"==n.type)e=a.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),a.a.createElement(d.Switch,Object.assign({id:this.props.setting.key,checked:this.props.value,onChange:function(e){return t.changeSettingValue(e.target.checked)}},n.params)));else if("dropdown"==n.type)e=a.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingRight:20}},this.props.setting.name+":"),a.a.createElement(D.a,Object.assign({value:Array.isArray(this.props.value)?this.props.value.map((function(e){return I.a.find(n.params.options,{value:e})})):I.a.find(n.params.options,{value:this.props.value}),onChange:function(e){return t.changeSettingValue(Array.isArray(e)?e.map((function(e){return e.value})):e?e.value:null)}},n.params)));else if("color"==n.type){var r=this.state.displayColorPicker?a.a.createElement("div",{style:{position:"absolute",bottom:60}},a.a.createElement(Z.ChromePicker,Object.assign({color:this.props.value,onChangeComplete:function(e){return t.changeSettingValue(e.hex)}},n.params))):null;e=a.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},a.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),a.a.createElement("div",{className:"z-depth-2",onClick:this.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:this.props.value}}),r)}else"rangeslider"==n.type?e=a.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},a.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),a.a.createElement(ee.a,Object.assign({value:this.props.value,onChange:function(e){return t.changeSettingValue(e)}},n.params))):"number"==n.type?e=a.a.createElement("div",null,a.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),a.a.createElement("input",Object.assign({type:"number",value:this.props.value,onChange:function(e){return t.changeSettingValue(Number(e.target.value))}},n.params))):"queries"==n.type&&(e=a.a.createElement("div",null,a.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),a.a.createElement(re,{changeSettingValue:this.changeSettingValue,setting:this.props.setting,value:this.props.value,w:this.w})));var s={"data-tip":(this.props.setting.help?this.props.setting.help+"<br>":"")+"Default: "+(this.props.setting.default||"None"),"data-multiline":!0,"data-effect":"solid","data-place":"color"==n.type?"bottom":"top"};return a.a.createElement("div",Object.assign({style:se({marginTop:20,marginBottom:20,width:this.w(n.width)},n.styles)},s),e)}}]),t}(r.Component),ie=Object(f.b)((function(e){return{browser:e.browser}}),(function(e){return{changeSettings:function(t,n,r){return e(function(e,t,n){return{type:e,settingKey:t,value:n}}(t,n,r))}}}))(oe),le=n(207),ce=n.n(le),ue=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).renderSettingsGroup=function(e){return e.map((function(e){return e.inputField?a.a.createElement(ie,{key:e.key,setting:e,value:n.props.settings[e.key],onSettingChangeType:n.props.onSettingChangeType}):null}))},n.renderSettingsGroups=function(e){return n.props.paramGroups.map((function(t){var r=t.key?t.key:"undefined",s=e[r];if(!s)return null;var o=I.a.groupBy(s,"subGroup"),i=(t.subGroups?[{key:"undefined",name:null}].concat(Object(T.a)(t.subGroups)):[{key:"undefined",name:null}]).map((function(e){var t=e.key,r=e.name;return o[t]?a.a.createElement("div",{key:t},a.a.createElement("div",{style:{paddingBottom:20,fontWeight:"bold",fontSize:"1.3em",textAlign:"left"}},r),a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center"}},n.renderSettingsGroup(o[t]))):null}));return a.a.createElement(d.CollapsibleItem,{key:r,header:t.name,icon:a.a.createElement(d.Icon,null,t.icon)},a.a.createElement("blockquote",{style:{textAlign:"left"}},ce()(t.description)),i,a.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},a.a.createElement(d.Button,{onClick:n.props.undoSettings,"data-tip":"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.",className:"orange",style:{margin:20}},a.a.createElement(d.Icon,{left:!0},"arrow_back_ios"),"Previous settings"),a.a.createElement(d.Button,{"data-tip":"This will restore all settings to the plot's defaults",className:"red",style:{margin:20}},a.a.createElement(d.Icon,{left:!0},"refresh"),"Restore defaults"),a.a.createElement(d.Button,{"data-tip":"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings",onClick:function(){return n.props.submitSettings(s.reduce((function(e,t){return e[t.key]=n.props.settings[t.key],e}),{}))},className:"blue",style:{margin:20}},"Submit settings",a.a.createElement(d.Icon,{right:!0},"arrow_forward_ios"))))}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=I.a.groupBy(this.props.params,"group");return a.a.createElement(d.Collapsible,{popout:!0},this.renderSettingsGroups(e))}}]),t}(r.Component),pe=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).submitSettings=function(e){V.updateSessionSettings(n.props.session.id,e,(function(e){n.props.setCurrentSession(e),alert("Session settings have been updated")}))},n.undoSettings=function(){V.undoSessionSettings(n.props.session.id,(function(e){n.props.setCurrentSession(e),alert("Session settings have been rolled back")}))},n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;V.getSessionSettings((function(t){return e.props.setCurrentSession(t)}))}},{key:"render",value:function(){return I.a.isEmpty(this.props.session)?null:a.a.createElement("div",{style:{padding:20}},a.a.createElement(ue,{settings:this.props.session.settings,params:this.props.session.params,paramGroups:this.props.session.paramGroups,onSettingChangeType:"CHANGE_SESSION_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings}),a.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(r.Component),de=Object(f.b)((function(e){return{session:e.session}}),(function(e){return{setCurrentSession:function(t){return e(g(t))}}}))(pe),fe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).submitSettings=function(e){V.updatePlotSettings(n.props.active.plot.id,e,(function(e){n.props.addPlots(Object(C.a)({},e.id,e)),n.props.active.plot.id==e.id&&n.props.setActivePlot(e)}))},n.undoSettings=function(){V.undoPlotSettings(n.props.active.plot.id,(function(e){n.props.addPlots(Object(C.a)({},e.id,e)),n.props.active.plot.id==e.id&&n.props.setActivePlot(e)}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;V.getSessionSettings((function(t){return e.props.setCurrentSession(t)}))}},{key:"render",value:function(){if(!this.props.active.plot)return null;var e=a.a.createElement(ue,{settings:this.props.active.plot.settings,params:this.props.active.plot.params,paramGroups:this.props.active.plot.paramGroups,onSettingChangeType:"CHANGE_PLOT_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings});return a.a.createElement("div",null,a.a.createElement(d.Row,null,a.a.createElement(d.Col,{className:"s12 l4"},a.a.createElement(F,{plot:this.props.active.plot,plotStyle:{height:"75vh"}})),a.a.createElement(d.Col,{className:"s12 l8"},"infinity"==this.props.browser.mediaType?a.a.createElement("div",{className:"scrollView",style:{maxHeight:"90vh"}},e):e)),a.a.createElement(N.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(r.Component),ge=Object(f.b)((function(e){return{plots:e.plots,structures:e.structures,active:e.active,session:e.session,browser:e.browser}}),(function(e){return{setCurrentSession:function(t){return e(g(t))},addPlots:function(t,n){return e(m(t,n))},setActivePlot:function(t){return e(v(t))},setNewStructures:function(t){return e(b(t))}}}))(fe);function me(){return a.a.createElement(E.d,null,a.a.createElement(w,{path:"/plots",exact:!0,component:$}),a.a.createElement(w,{path:"/settings",component:de}),a.a.createElement(w,{path:"/plotTweaking",component:ge}),a.a.createElement(w,{component:$}))}var be=n(40),he=n(101),ve=n(142),ye=(n(529),n(208)),Oe=n.n(ye);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je={},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSION":console.log("REDUX: Setting current session...");var n=t.session;return console.log(n),n;case"CHANGE_SESSION_SETTINGS":console.log("REDUX: Changing current session settings (not submitting yet)...");n=Se({},e,{settings:Se({},e.settings,Object(C.a)({},t.settingKey,t.value))});return console.log(n),n;case"CLEAR_SESSION":return je;default:return e}};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLOTS":console.log("REDUX: Storing a new plot...");var n=Te({},e,{},t.newPlots);return console.log(n),n;case"REMOVE_PLOT":return I.a.omit(e,[t.plotID]);case"CLEAR_SESSION":return Ce;default:return e}};function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne={},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STRUCTURES":console.log("REDUX: Setting the new structures...");var n=Ae({},t.newStructures);return console.log(n),n;default:return e}},_e=[],xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSION_TABS":console.log("REDUX: Setting session tabs...");var n=t.tabs;return console.log(n),n;case"CLEAR_SESSION":return _e;default:return e}};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Le={plot:void 0,tab:void 0},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_PLOT":console.log("REDUX: Setting active plot...");var n=Be({},e,{plot:t.activePlot});return console.log(n),n;case"CHANGE_PLOT_SETTINGS":console.log("REDUX: Changing plot settings (not submitting yet)...");n=Be({},e,{plot:Be({},e.plot,{settings:Be({},e.plot.settings,Object(C.a)({},t.settingKey,t.value))})});return console.log(n),n;case"SET_ACTIVE_TAB":console.log("REDUX: Setting active tab...");n=Be({},e,{tab:t.activeTab});return console.log(n),n;case"CLEAR_SESSION":return Le;default:return e}},Ge=Object(be.b)({session:Pe,plots:ke,structures:De,tabs:xe,active:ze,browser:Object(he.a)({small:600,medium:992})}),Ve={key:"root",storage:Oe.a,whitelist:["active","structures"]},He=Object(ve.a)(Ve,Ge),qe=n(209),Ue=function(){var e=Object(be.c)(He,he.b);return{store:e,persistor:Object(ve.b)(e)}}(),Fe=Ue.store,We=Ue.persistor;var Je=function(){return a.a.createElement(f.a,{store:Fe},a.a.createElement(qe.a,{persistor:We},a.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},a.a.createElement(O,null),a.a.createElement("div",{className:"appContent",style:{flex:1}},a.a.createElement(E.c,{history:j},a.a.createElement(me,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.cd7591b0.chunk.js.map