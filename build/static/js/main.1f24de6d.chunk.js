(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{218:function(e,t,n){e.exports=n(540)},223:function(e,t,n){},224:function(e,t,n){},540:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(12),o=n.n(i),r=(n(223),n(224),n(23)),l=n(24),c=n(27),u=n(26),p=n(28),d=n(4),g=n(30),m=function(e){return{type:"SET_SESSION",session:e}},f=function(e,t){return{type:"ADD_PLOTS",newPlots:e,tabsIDs:t}},h=function(e){return{type:"SET_STRUCTURES",newStructures:e}},v=function(e){return{type:"SET_SESSION_TABS",tabs:e}},b=function(e){return{type:"SET_ACTIVE_PLOT",activePlot:e}},y=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement(d.Navbar,{brand:s.a.createElement("a",null),alignLinks:"right",className:"transparent z-depth-0"},s.a.createElement(d.NavItem,{className:"blackText",href:"/plots"},"Plots"),s.a.createElement(d.NavItem,{href:"/settings"},s.a.createElement(d.Icon,null,"settings")),s.a.createElement(d.NavItem,{href:"/settings"},s.a.createElement(d.Icon,null,"help")))}}]),t}(a.Component),E=Object(g.b)(null,(function(e){return{clearSession:function(){return e({type:"CLEAR_SESSION"})}}}))(y),S=n(541),O=n(47),j=Object(O.a)(),T=n(217);function C(e){var t=e.component,n=e.isPrivate,a=Object(T.a)(e,["component","isPrivate"]);return n?s.a.createElement(S.a,{to:"/"}):s.a.createElement(S.b,Object.assign({},a,{component:t}))}C.defaultProps={isPrivate:!1};var w=n(71),k=n(33),I=n(11),P=n(14),A=n.n(P),N=n(50),_=n.n(N),x=n(63),R=n(73),D=n(208),B=n.n(D),L=n(209),z=n(210),G=new(function(){function e(){var t=this;Object(r.a)(this,e),this.tabAdress=function(e){return t.tabsAdress+"/"+e},this.plotAdress=function(e){return t.plotsAdress+"/"+e},this._requestToApi=function(e,n,a){fetch(t.apiAdress+e,Object(I.a)({headers:{Accept:"application/json","Content-Type":"application/json"}},n)).then((function(e){return e.json()})).then((function(e){e.statusCode>=400?alert(e.error):(e.plot&&(e=Object(I.a)({},e,{plot:Object(I.a)({},e.plot,{figure:JSON.parse(e.plot.figure)})})),a(e))})).catch((function(e){console.log(e)}))},this._get=function(e,n){var a=n.request,s=n.responseHandler;t._requestToApi(e,Object(I.a)({},a,{method:"GET"}),s)},this._post=function(e,n){var a=n.request,s=n.responseHandler;t._requestToApi(e,Object(I.a)({},a,{method:"POST"}),s)},this._put=function(e,n){var a=n.request,s=n.responseHandler;t._requestToApi(e,Object(I.a)({},a,{method:"PUT"}),s)},this._delete=function(e,n){var a=n.request,s=n.responseHandler;t._requestToApi(e,Object(I.a)({},a,{method:"DELETE"}),s)},this._updateSettings=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify({settings:n,action:"updateSettings"})},responseHandler:a})},this._undoSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._post(e,{request:{body:JSON.stringify({action:"undoSettings"})},responseHandler:n})},this._save=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify(Object(I.a)({action:"save"},n))},responseHandler:a})},this._load=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._post(e,{request:{body:JSON.stringify(Object(I.a)({action:"load"},n))},responseHandler:a})},this.getSessionSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.sessionAdress,{responseHandler:function(t){return e(t.session)}})},this.updateSessionSettings=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._updateSettings(t.sessionAdress,n,(function(e){return a(e.session)}))},this.undoSessionSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._undoSettings(t.sessionAdress,(function(e){return n(e.session)}))},this.saveSession=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._save(t.sessionAdress,e,(function(t){return n(t.session,e)}))},this.loadSession=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._load(t.sessionAdress,e,(function(t){return n(t.session,e)}))},this.getAvailableStructs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.structsAdress,{responseHandler:function(t){return e(t.structures)}})},this.getSessionTabs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.tabsAdress,{responseHandler:function(t){return e(t.tabs)}})},this.addNewTab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.newtabAdress,{responseHandler:function(t){return e(t.tabs)}})},this.removeTab=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._delete(t.tabAdress(e),{responseHandler:function(e){return n(e.tabs)}})},this.updateTabParams=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._put(t.tabAdress(e),{request:{body:JSON.stringify(n)},responseHandler:function(e){return a(e.tabs)}})},this.getPlotOptions=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};t._get(t.plotTypesAdress,{responseHandler:function(t){return e(t.plotOptions)}})},this.getPlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._get(t.plotAdress(e),{responseHandler:function(e){return n(e.plot)}})},this.getNewPlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._post(t.plotsAdress,{request:{body:JSON.stringify(e)},responseHandler:function(t){return n(t.plot,e)}})},this.updatePlotSettings=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t._updateSettings(t.plotAdress(e),n,(function(e){return a(e.plot)}))},this.undoPlotSettings=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._undoSettings(t.plotAdress(e),(function(e){return n(e.plot)}))},this.removePlot=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._delete(t.plotAdress(e.plotID),{responseHandler:function(t){return n(t.session,e)}})},this.showPlotFullScreen=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t._post(t.plotAdress(e),{request:{body:JSON.stringify({action:"fullScreen"})},responseHandler:function(e){return n(e.plot)}})},this.apiAdress="http://localhost:4000"}return Object(l.a)(e,[{key:"sessionAdress",get:function(){return"/sislGUI/session"}},{key:"tabsAdress",get:function(){return"/sislGUI/tab"}},{key:"newtabAdress",get:function(){return this.tabsAdress+"/new"}},{key:"plotsAdress",get:function(){return"/sislGUI/plot"}},{key:"plotTypesAdress",get:function(){return"/sislGUI/plotTypes"}},{key:"structsAdress",get:function(){return"/sislGUI/structs"}}]),e}()),H=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).removePlot=function(){G.removePlot({plotID:n.props.plot.id,tabID:n.props.active.tab},(function(e,t){n.props.setSessionTabs(e.tabs),n.props.removePlot(t.plotID)}))},n.setPlotAsActive=function(){n.props.setActivePlot(n.props.plot)},n.showPlotFullScreen=function(){G.showPlotFullScreen(n.props.plot.id)},n.state={isLoading:!1},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(this.state.isLoading||!this.props.plot)return s.a.createElement(d.Card,{className:"plotcard",style:{borderRadius:15}},s.a.createElement(d.Row,{style:{textAlign:"center"}},s.a.createElement(L.CircleLoader,{color:"#36D7B7"})),s.a.createElement("div",null,"We are working hard to load your plot."));var t=this.props.plot.figure.layout,n=this.props.plot.settings.paper_bgcolor||"white";if(this.props.active.plot&&this.props.active.plot.id==this.props.plot.id){n=this.props.active.plot.settings.paper_bgcolor||"white";var a=A.a.groupBy(this.props.active.plot.params,"group").layout.reduce((function(t,n){return t[n.key]=e.props.active.plot.settings[n.key],t}),{}),i=Object(z.unflatten)(a,{delimiter:"_"});t=Object(I.a)({},t,{},a,{xaxis:Object(I.a)({},t.xaxis,{},i.xaxis),yaxis:Object(I.a)({},t.yaxis,{},i.yaxis)})}var o=Object(R.d)((function(){return s.a.createElement("div",{style:{cursor:"pointer"}},s.a.createElement(d.Icon,{className:"small grey-text"},"drag_handle"))})),r=this.props.sortable?s.a.createElement("div",{"data-tip":"Drag the plot to change its position",style:{justifyContent:"center",alignItems:"center",textAlign:"center",paddingTop:"20px",background:n}},s.a.createElement(o,null)):null;return s.a.createElement(d.Card,{className:"plotcard",style:{borderRadius:15,overflow:"hidden"}},s.a.createElement("div",{style:Object(I.a)({display:"flex",flexDirection:"column"},this.props.style)},r,s.a.createElement("div",{style:{flex:1,padding:"10px 10px 0 10px",background:n}},s.a.createElement(B.a,{useResizeHandler:!0,style:Object(I.a)({width:"auto",height:"100%"},this.props.plotStyle),data:this.props.plot.figure.data,layout:t,frames:this.props.plot.figure.frames,onClick:function(e){return console.log(e)},onUpdate:function(e){return console.warn(e)}})),s.a.createElement("div",{style:{display:"flex"},className:"card-action"},s.a.createElement("div",{style:{flex:1,textAlign:"left"}},s.a.createElement("a",{"data-tip":"Full screen",href:"#",onClick:this.showPlotFullScreen},s.a.createElement(d.Icon,null,"fullscreen"))),s.a.createElement("div",null,s.a.createElement("a",{"data-tip":"Edit",href:"/plotTweaking",onClick:this.setPlotAsActive},s.a.createElement(d.Icon,null,"edit")),s.a.createElement("a",{"data-tip":"Export data",href:"#"},s.a.createElement(d.Icon,null,"file_download")),s.a.createElement("a",{"data-tip":"Remove",href:"#",className:"red-text",onClick:this.removePlot},s.a.createElement(d.Icon,{className:"removePlot"},"delete"))))),s.a.createElement(_.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(a.Component),V=Object(g.b)((function(e){return{active:e.active,session:e.session}}),(function(e){return{setSessionTabs:function(t){return e(v(t))},setActivePlot:function(t){return e(b(t))},removePlot:function(t,n){return e(function(e,t){return{type:"REMOVE_PLOT",plotID:e,tabID:t}}(t,n))}}}))(H),F=Object(R.b)((function(e){var t=e.plot;return s.a.createElement(d.Col,{s:12,m:6,l:4},s.a.createElement(V,{plot:t,sortable:!0,plotStyle:{height:"65vh"}}))})),q=Object(R.a)((function(e){var t=e.plots;return s.a.createElement(d.Row,null,t.map((function(e,t){return s.a.createElement(F,{key:t,index:t,plot:e})})))})),U=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).onSortEnd=function(e){var t=e.oldIndex,a=e.newIndex;n.props.setTabPlots(n.props.active.tab,Object(R.c)(A.a.find(n.props.tabs,["id",n.props.active.tab]).plots,t,a))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.active.tab)return null;var t=A.a.find(this.props.tabs,["id",this.props.active.tab]);if(!t)return null;var n=t.plots.map((function(t){return e.props.plots[t]}));return s.a.createElement("div",null,s.a.createElement(q,{axis:"xy",useDragHandle:!0,transitionDuration:0,plots:n,onSortEnd:this.onSortEnd}))}}]),t}(a.Component),W=Object(g.b)((function(e){return{plots:e.plots,structures:e.structures,tabs:e.tabs,active:e.active}}),(function(e){return{setTabPlots:function(t,n){return e(function(e,t){return{type:"SET_TAB_PLOTS",tabID:e,plots:t}}(t,n))}}}))(U),J=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).syncWithSession=function(e){n.updateTabs(),G.getPlotOptions((function(e){return n.setState({plotOptions:e})})),G.getAvailableStructs((function(e){return n.props.setNewStructures(e)})),e?n.props.setCurrentSession(e):G.getSessionSettings((function(e){return n.props.setCurrentSession(e)}))},n.updateTabs=function(e){e?n.props.setSessionTabs(e):G.getSessionTabs((function(e){n.props.setSessionTabs(e),A.a.find(e,["id",n.props.active.tab])||n.props.setActiveTab(e.length>0?e[0].id:void 0)}))},n.newTab=function(){G.addNewTab((function(e){n.updateTabs(e),n.props.setActiveTab(A.a.last(e).id)}))},n.removeTab=function(e){var t=A.a.findIndex(n.props.tabs,["id",e]);G.removeTab(e,(function(e){n.props.setActiveTab(e.length>0?e[Math.min(e.length-1,t)].id:void 0),n.updateTabs(e)}))},n.updateTabParams=function(e,t){G.updateTabParams(e,t,(function(e){n.updateTabs(e)}))},n.updateTabName=function(e){e.target.blur(),n.updateTabParams(e.target.id,{name:e.target.textContent})},n.getNewPlot=function(){n.setState({isLoading:!0}),G.getNewPlot(Object(I.a)({tabID:n.props.active.tab},n.state.plotToInitialize),(function(e,t){n.updateTabs(),n.props.addPlots(Object(k.a)({},e.id,e)),n.togglePlotInitializer(),n.props.setActiveTab(t.tabID),n.setState({isLoading:!1})}))},n.saveCurrentSession=function(){var e=prompt("Please provide the path to save the session.\n\nRoot directory:\n"+n.props.session.settings.rootDir);e&&(G.saveSession({path:e}),alert("Session saved"))},n.loadSession=function(){var e=prompt("Please provide the path of the saved session.\n\nRoot directory:\n"+n.props.session.settings.rootDir);e&&G.loadSession({path:e},(function(e){console.log("Session loaded",e),n.syncWithSession(e)}))},n.togglePlotInitializer=function(){n.state.displayPlotInitializer||window.scrollTo({top:0,behavior:"smooth"}),n.setState({displayPlotInitializer:!n.state.displayPlotInitializer})},n.updateInitializingOptions=function(e,t){n.setState({plotToInitialize:Object(I.a)({},n.state.plotToInitialize,Object(k.a)({},e,t))})},n.renderPlotInitializer=function(){if(0==n.props.tabs.length)return null;var e=n.state.isLoading?s.a.createElement(d.Row,null,"We are getting your shiny new plot... wait a moment please :)"):null;return s.a.createElement(d.Card,{style:{marginLeft:20,marginRight:20,background:"#5588ff"},actions:s.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},s.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:n.togglePlotInitializer},"Dismiss",s.a.createElement(d.Icon,{right:!0},"close")),s.a.createElement("a",{className:"btn-flat black-text initPlotBtn",onClick:n.getNewPlot},"Initialize plot",s.a.createElement(d.Icon,{right:!0},"done")),s.a.createElement("a",{className:"btn-flat black-text initPlotBtn"},s.a.createElement(d.Icon,null,"refresh")))},s.a.createElement(d.Row,null,s.a.createElement(d.Col,{s:12,m:12,l:6},s.a.createElement(d.Row,null,"Structures"),s.a.createElement(d.Row,null,Object.keys(n.props.structures).map((function(e){var t=n.state.plotToInitialize.struct==e?"selected":null;return s.a.createElement(d.Col,{s:12,m:6,l:4},s.a.createElement("div",{className:"structureCell "+t,onClick:function(){return n.updateInitializingOptions("struct",e)}},n.props.structures[e].name))})))),s.a.createElement(d.Col,{s:12,m:6,l:3},s.a.createElement(d.Row,null,"Plot type"),s.a.createElement(x.a,{options:n.state.plotOptions,placeholder:"Choose the plot type...",isClearable:!0,isSearchable:!0,onChange:function(e){return n.updateInitializingOptions("plotClass",e?e.value:void 0)}})),s.a.createElement(d.Col,{s:12,m:6,l:2},s.a.createElement(d.Row,null,"Tab"),s.a.createElement(x.a,{placeholder:"Choose a tab...",options:n.props.tabs.map((function(e){return{label:e.name,value:e.id}})),defaultValue:n.props.active.tab&&A.a.find(n.props.tabs,["id",n.props.active.tab])?{label:A.a.find(n.props.tabs,["id",n.props.active.tab]).name,value:n.props.active.tab}:null,isClearable:!0,isSearchable:!0,onChange:function(e){return n.updateInitializingOptions("tabID",e?e.value:void 0)}})),s.a.createElement(d.Col,{s:12,m:6,l:1},s.a.createElement(d.Row,null,"Animation"),s.a.createElement(d.Switch,{id:"isAnimation",checked:n.state.plotToInitialize.animation,onChange:function(e){return n.updateInitializingOptions("animation",e.target.checked)}}))),e)},n.renderNewPlotButton=function(e){var t=e?null:s.a.createElement(d.Button,{"data-tip":"New plot",floating:!0,onClick:n.togglePlotInitializer,icon:s.a.createElement(d.Icon,null,"add"),className:"green"});return s.a.createElement(d.Button,{floating:!0,icon:s.a.createElement(d.Icon,null,"menu"),fab:{direction:"left",hoverEnabled:!1},className:0!=Object.keys(n.props.plots).length||n.state.displayPlotInitializer?"red":"red pulse",large:!0},s.a.createElement(_.a,{multiline:!0,disable:!!n.props.session.settings&&!n.props.session.settings.showTooltips}),t,s.a.createElement(d.Button,{"data-tip":"Save session",floating:!0,icon:s.a.createElement(d.Icon,null,"save"),onClick:n.saveCurrentSession,className:"yellow darken-1"}),s.a.createElement(d.Button,{"data-tip":"Load session",floating:!0,icon:s.a.createElement(d.Icon,null,"open_in_new"),onClick:n.loadSession,className:"green"}),s.a.createElement(d.Button,{floating:!0,icon:s.a.createElement(d.Icon,null),className:"blue"}))},n.state={displayPlotInitializer:!1,plotToInitialize:{struct:!1,animation:!1},loadingPlots:[],plotOptions:[]},n.syncWithSession(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setActivePlot(void 0)}},{key:"componentDidUpdate",value:function(){var e=this,t=A.a.find(this.props.tabs,["id",this.props.active.tab]);t&&t.plots.forEach((function(t){e.props.plots[t]||-1!=e.state.loadingPlots.indexOf(t)||(e.setState({loadingPlots:[].concat(Object(w.a)(e.state.loadingPlots),[t])}),G.getPlot(t,(function(n){e.props.addPlots(Object(k.a)({},n.id,n)),e.setState({loadingPlots:e.state.loadingPlots.filter((function(e){return e!=t}))})})))}))}},{key:"render",value:function(){var e=this,t=this.props.tabs.map((function(t){var n=t.id,a=t.name,i=n==e.props.active.tab;return s.a.createElement("div",{key:n,className:i?"active plotTab":"plotTab",onClick:i?null:function(){return e.props.setActiveTab(n)}},s.a.createElement("div",{id:n,contentEditable:i,onBlur:e.updateTabName,onKeyUp:function(t){13===t.keyCode&&e.updateTabName(t)}},a),i?s.a.createElement("div",{className:"removeTabBut",onClick:function(){return e.removeTab(n)}},s.a.createElement(d.Icon,null,"remove_circle")):null)}));return s.a.createElement("div",null,s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:"0px 20px",paddingLeft:80,alignItems:"center"}},s.a.createElement("div",{onClick:this.newTab,"data-tip":"New tab"},s.a.createElement(d.Icon,{className:"newTabIcon small blue-text text-darken-3",style:{paddingRight:0}},"create_new_folder")),t),s.a.createElement(d.Row,{className:"plotInitializer"+(this.state.displayPlotInitializer?"":" hidden")},s.a.createElement(d.Col,{s:12},this.renderPlotInitializer())),s.a.createElement(d.Row,null,this.renderNewPlotButton(this.state.displayPlotInitializer)),s.a.createElement(W,null),s.a.createElement(_.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(a.Component),X=Object(g.b)((function(e){return{plots:e.plots,structures:e.structures,tabs:e.tabs,active:e.active,session:e.session}}),(function(e){return{setCurrentSession:function(t){return e(m(t))},setActiveTab:function(t){return e({type:"SET_ACTIVE_TAB",activeTab:t})},setSessionTabs:function(t){return e(v(t))},setActivePlot:function(t){return e(b(t))},addPlots:function(t,n){return e(f(t,n))},addTabs:function(t){return e(function(e){return{type:"ADD_TABS",newTabs:e}}(t))},setNewStructures:function(t){return e(h(t))}}}))(J),M=n(105),Q=n(107),K=(n(203),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleColorPicker=function(e){n.setState({displayColorPicker:Object(I.a)({},n.state.displayColorPicker,Object(k.a)({},e,!n.state.displayColorPicker[e]))})},n.addQuery=function(){var e=n.props.setting.inputField.queryForm.reduce((function(e,t){return e[t.key]=t.default||null,e}),{});e.active=!0,n.props.changeSettingValue([].concat(Object(w.a)(n.props.value),[e]))},n.changeSettingValue=function(e,t,a){var s=A.a.cloneDeep(n.props.value);s[e]=Object(I.a)({},s[e],Object(k.a)({},t,a)),n.props.changeSettingValue(s)},n.renderInputField=function(e,t,a){var i,o=e.inputField;if(!o)return null;if("textinput"==o.type)i=s.a.createElement(d.TextInput,Object.assign({noLayout:!0,value:t,onChange:function(t){return n.changeSettingValue(a,e.key,t.target.value)},label:e.name},o.params));else if("switch"==o.type)i=s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},e.name),s.a.createElement(d.Switch,Object.assign({id:a+e.key,checked:t,onChange:function(t){return n.changeSettingValue(a,e.key,t.target.checked)}},o.params)));else if("dropdown"==o.type)i=s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingRight:20}},e.name+":"),s.a.createElement(x.a,Object.assign({className:"querySelect",value:Array.isArray(t)?t.map((function(e){return A.a.find(o.params.options,{value:e})})):A.a.find(o.params.options,{value:t}),onChange:function(t){return n.changeSettingValue(a,e.key,Array.isArray(t)?t.map((function(e){return e.value})):t?t.value:null)}},o.params)));else if("color"==o.type){var r=String(a)+e.key,l=n.state.displayColorPicker&&n.state.displayColorPicker[r]?s.a.createElement("div",{style:{position:"absolute",bottom:60}},s.a.createElement(M.ChromePicker,Object.assign({color:t||"#00F0F8FF",onChangeComplete:function(t){return n.changeSettingValue(a,e.key,t.hex)}},o.params))):null;i=s.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},e.name),s.a.createElement("div",{className:"z-depth-2",onClick:function(){return n.toggleColorPicker(r)},style:{width:30,height:30,borderRadius:30,background:t}}),l)}else"rangeslider"==o.type?i=s.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},s.a.createElement("div",{style:{paddingBottom:10}},e.name),s.a.createElement(Q.a,Object.assign({value:t,onChange:function(t){return n.changeSettingValue(a,e.key,t)}},o.params))):"number"==o.type&&(i=s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},e.name),s.a.createElement("input",Object.assign({type:"number",value:t,onChange:function(t){return n.changeSettingValue(a,e.key,Number(t.target.value))}},o.params))));return s.a.createElement("div",{style:Object(I.a)({marginBottom:5,marginTop:5,paddingLeft:10,paddingRight:10,width:n.props.w(o.width)},o.style)},i)},n.renderQuery=function(e,t){return s.a.createElement("div",{key:t,style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement(d.Switch,{id:t+"active",checked:e.active,onChange:function(e){return n.changeSettingValue(t,"active",e.target.checked)}}),s.a.createElement(d.Card,{className:"queryCard",style:{flex:1,background:e.active?"#CBFFC0":"#ffc3cd",borderRadius:10}},s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},n.props.setting.inputField.queryForm.map((function(a){return n.renderInputField(a,e[a.key],t)})))))},n.state={displayColorPicker:{}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.value.map((function(t,n){return e.renderQuery(t,n)})),s.a.createElement(d.Button,{"data-tip":"Add a new query",onClick:this.addQuery},"Add Query"))}}]),t}(a.Component)),Y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).w=function(e){if(e)for(var t=["s","m","l"].map((function(t){return e.indexOf(t)>=0})),a=["small","medium","infinity"].indexOf(n.props.browser.mediaType);a>-1;a--){if(t[a])return A.a.find(e.split(" "),(function(e){return e.indexOf(["s","m","l"][a])>=0})).substr(1)}},n.changeSettingValue=function(e){n.props.changeSettings(n.props.onSettingChangeType,n.props.setting.key,e)},n.toggleColorPicker=function(){n.setState({displayColorPicker:!n.state.displayColorPicker})},n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,n=this.props.setting.inputField;if("textinput"==n.type)e=s.a.createElement(d.TextInput,Object.assign({noLayout:!0,value:this.props.value,onChange:function(e){return t.changeSettingValue(e.target.value)},label:this.props.setting.name},n.params));else if("switch"==n.type)e=s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement(d.Switch,Object.assign({id:this.props.setting.key,checked:this.props.value,onChange:function(e){return t.changeSettingValue(e.target.checked)}},n.params)));else if("dropdown"==n.type)e=s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingRight:20}},this.props.setting.name+":"),s.a.createElement(x.a,Object.assign({value:Array.isArray(this.props.value)?this.props.value.map((function(e){return A.a.find(n.params.options,{value:e})})):A.a.find(n.params.options,{value:this.props.value}),onChange:function(e){return t.changeSettingValue(Array.isArray(e)?e.map((function(e){return e.value})):e?e.value:null)}},n.params)));else if("color"==n.type){var a=this.state.displayColorPicker?s.a.createElement("div",{style:{position:"absolute",bottom:60}},s.a.createElement(M.ChromePicker,Object.assign({color:this.props.value,onChangeComplete:function(e){return t.changeSettingValue(e.hex)}},n.params))):null;e=s.a.createElement("div",{style:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("div",{className:"z-depth-2",onClick:this.toggleColorPicker,style:{width:30,height:30,borderRadius:30,background:this.props.value}}),a)}else"rangeslider"==n.type?e=s.a.createElement("div",{style:{paddingLeft:"10%",paddingRight:"10%"}},s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement(Q.a,Object.assign({value:this.props.value,onChange:function(e){return t.changeSettingValue(e)}},n.params))):"number"==n.type?e=s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement("input",Object.assign({type:"number",value:this.props.value,onChange:function(e){return t.changeSettingValue(Number(e.target.value))}},n.params))):"queries"==n.type&&(e=s.a.createElement("div",null,s.a.createElement("div",{style:{paddingBottom:10}},this.props.setting.name),s.a.createElement(K,{changeSettingValue:this.changeSettingValue,setting:this.props.setting,value:this.props.value,w:this.w})));var i={"data-tip":(this.props.setting.help?this.props.setting.help+"<br>":"")+"Default: "+(this.props.setting.default||"None"),"data-multiline":!0,"data-effect":"solid","data-place":"color"==n.type?"bottom":"top"};return s.a.createElement("div",Object.assign({style:Object(I.a)({marginTop:20,marginBottom:20,width:this.w(n.width)},n.style)},i),e)}}]),t}(a.Component),$=Object(g.b)((function(e){return{browser:e.browser}}),(function(e){return{changeSettings:function(t,n,a){return e(function(e,t,n){return{type:e,settingKey:t,value:n}}(t,n,a))}}}))(Y),Z=n(214),ee=n.n(Z),te=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).renderSettingsGroup=function(e){return e.map((function(e){return e.inputField?s.a.createElement($,{key:e.key,setting:e,value:n.props.settings[e.key],onSettingChangeType:n.props.onSettingChangeType}):null}))},n.renderSettingsGroups=function(e){return n.props.paramGroups.map((function(t){var a=t.key?t.key:"null",i=e[a];if(!i)return null;var o=A.a.groupBy(i,"subGroup"),r=(t.subGroups?[{key:"null",name:null}].concat(Object(w.a)(t.subGroups)):[{key:"null",name:null}]).map((function(e){var t=e.key,a=e.name;return o[t]?s.a.createElement("div",{key:t},s.a.createElement("div",{style:{paddingBottom:20,fontWeight:"bold",fontSize:"1.3em",textAlign:"left"}},a),s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"center"}},n.renderSettingsGroup(o[t]))):null}));return s.a.createElement(d.CollapsibleItem,{key:a,header:t.name,icon:s.a.createElement(d.Icon,null,t.icon)},s.a.createElement("blockquote",{style:{textAlign:"left"}},ee()(t.description)),r,s.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"}},s.a.createElement(d.Button,{onClick:n.props.undoSettings,"data-tip":"This will roll back to previous settings.<br> IT AFFECTS ALL GROUPS OF PARAMETERS, not only this one.",className:"orange",style:{margin:20}},s.a.createElement(d.Icon,{left:!0},"arrow_back_ios"),"Previous settings"),s.a.createElement(d.Button,{"data-tip":"This will restore all settings to the plot's defaults",className:"red",style:{margin:20}},s.a.createElement(d.Icon,{left:!0},"refresh"),"Restore defaults"),s.a.createElement(d.Button,{"data-tip":"This will change the settings and will update everything accordingly.<br> IT ONLY AFFECTS THIS GROUP OF SETTINGS, not all settings",onClick:function(){return n.props.submitSettings(i.reduce((function(e,t){return e[t.key]=n.props.settings[t.key],e}),{}))},className:"blue",style:{margin:20}},"Submit settings",s.a.createElement(d.Icon,{right:!0},"arrow_forward_ios"))))}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=A.a.groupBy(this.props.params,"group");return s.a.createElement(d.Collapsible,{popout:!0},this.renderSettingsGroups(e))}}]),t}(a.Component),ne=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).submitSettings=function(e){G.updateSessionSettings(n.props.session.id,e,(function(e){n.props.setCurrentSession(e),alert("Session settings have been updated")}))},n.undoSettings=function(){G.undoSessionSettings(n.props.session.id,(function(e){n.props.setCurrentSession(e),alert("Session settings have been rolled back")}))},n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;G.getSessionSettings((function(t){return e.props.setCurrentSession(t)}))}},{key:"render",value:function(){return A.a.isEmpty(this.props.session)?null:s.a.createElement("div",{style:{padding:20}},s.a.createElement(te,{settings:this.props.session.settings,params:this.props.session.params,paramGroups:this.props.session.paramGroups,onSettingChangeType:"CHANGE_SESSION_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings}),s.a.createElement(_.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(a.Component),ae=Object(g.b)((function(e){return{session:e.session}}),(function(e){return{setCurrentSession:function(t){return e(m(t))}}}))(ne),se=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).submitSettings=function(e){G.updatePlotSettings(n.props.active.plot.id,e,(function(e){n.props.addPlots(Object(k.a)({},e.id,e)),n.props.active.plot.id==e.id&&n.props.setActivePlot(e)}))},n.undoSettings=function(){G.undoPlotSettings(n.props.active.plot.id,(function(e){n.props.addPlots(Object(k.a)({},e.id,e)),n.props.active.plot.id==e.id&&n.props.setActivePlot(e)}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;G.getSessionSettings((function(t){return e.props.setCurrentSession(t)}))}},{key:"render",value:function(){if(!this.props.active.plot)return null;var e=s.a.createElement(te,{settings:this.props.active.plot.settings,params:this.props.active.plot.params,paramGroups:this.props.active.plot.paramGroups,onSettingChangeType:"CHANGE_PLOT_SETTINGS",submitSettings:this.submitSettings,undoSettings:this.undoSettings});return s.a.createElement("div",null,s.a.createElement(d.Row,null,s.a.createElement(d.Col,{className:"s12 l4"},s.a.createElement(V,{plot:this.props.active.plot,plotStyle:{height:"75vh"}})),s.a.createElement(d.Col,{className:"s12 l8"},"infinity"==this.props.browser.mediaType?s.a.createElement("div",{className:"scrollView",style:{maxHeight:"90vh"}},e):e)),s.a.createElement(_.a,{multiline:!0,disable:!!this.props.session.settings&&!this.props.session.settings.showTooltips}))}}]),t}(a.Component),ie=Object(g.b)((function(e){return{plots:e.plots,structures:e.structures,active:e.active,session:e.session,browser:e.browser}}),(function(e){return{setCurrentSession:function(t){return e(m(t))},addPlots:function(t,n){return e(f(t,n))},setActivePlot:function(t){return e(b(t))},setNewStructures:function(t){return e(h(t))}}}))(se);function oe(){return s.a.createElement(S.d,null,s.a.createElement(C,{path:"/plots",exact:!0,component:X}),s.a.createElement(C,{path:"/settings",component:ae}),s.a.createElement(C,{path:"/plotTweaking",component:ie}),s.a.createElement(C,{component:X}))}var re=n(45),le=n(108),ce=n(149),ue=(n(537),n(215)),pe=n.n(ue),de={},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSION":console.log("REDUX: Setting current session...");var n=t.session;return console.log(n),n;case"CHANGE_SESSION_SETTINGS":console.log("REDUX: Changing current session settings (not submitting yet)...");n=Object(I.a)({},e,{settings:Object(I.a)({},e.settings,Object(k.a)({},t.settingKey,t.value))});return console.log(n),n;case"CLEAR_SESSION":return de;default:return e}},me={},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PLOTS":console.log("REDUX: Storing a new plot...");var n=Object(I.a)({},e,{},t.newPlots);return console.log(n),n;case"REMOVE_PLOT":return A.a.omit(e,[t.plotID]);case"CLEAR_SESSION":return me;default:return e}},he={},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STRUCTURES":console.log("REDUX: Setting the new structures...");var n=Object(I.a)({},t.newStructures);return console.log(n),n;default:return e}},be=[],ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SESSION_TABS":console.log("REDUX: Setting session tabs...");var n=t.tabs;return console.log(n),n;case"CLEAR_SESSION":return be;default:return e}},Ee={plot:void 0,tab:void 0},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_PLOT":console.log("REDUX: Setting active plot...");var n=Object(I.a)({},e,{plot:t.activePlot});return console.log(n),n;case"CHANGE_PLOT_SETTINGS":console.log("REDUX: Changing plot settings (not submitting yet)...");n=Object(I.a)({},e,{plot:Object(I.a)({},e.plot,{settings:Object(I.a)({},e.plot.settings,Object(k.a)({},t.settingKey,t.value))})});return console.log(n),n;case"SET_ACTIVE_TAB":console.log("REDUX: Setting active tab...");n=Object(I.a)({},e,{tab:t.activeTab});return console.log(n),n;case"CLEAR_SESSION":return Ee;default:return e}},Oe=Object(re.b)({session:ge,plots:fe,structures:ve,tabs:ye,active:Se,browser:Object(le.a)({small:600,medium:992})}),je={key:"root",storage:pe.a,whitelist:["active","structures"]},Te=Object(ce.a)(je,Oe),Ce=n(216),we=function(){var e=Object(re.c)(Te,le.b);return{store:e,persistor:Object(ce.b)(e)}}(),ke=we.store,Ie=we.persistor;var Pe=function(){return s.a.createElement(g.a,{store:ke},s.a.createElement(Ce.a,{persistor:Ie},s.a.createElement("div",{className:"App",style:{display:"flex",flexDirection:"column"}},s.a.createElement(E,null),s.a.createElement("div",{className:"appContent",style:{flex:1}},s.a.createElement(S.c,{history:j},s.a.createElement(oe,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(Pe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[218,1,2]]]);
//# sourceMappingURL=main.1f24de6d.chunk.js.map